<?php


class			pudlStringResult
	extends		pudlResult
	implements	pudlValue,
				pudlHelper {




	////////////////////////////////////////////////////////////////////////////
	// CONSTRUCTOR
	////////////////////////////////////////////////////////////////////////////
	public function __construct(pudl $pudl, $type) {
		parent::__construct($pudl);
		$this->type = $type;
	}




	////////////////////////////////////////////////////////////////////////////
	// CONVERT THIS OBJECT TO A STRING
	// http://php.net/manual/en/language.oop5.magic.php#object.tostring
	////////////////////////////////////////////////////////////////////////////
	public function __toString() {
		return $this->query;
	}




	////////////////////////////////////////////////////////////////////////////
	// CONVERT THIS OBJECT TO A PUDLVALUE
	////////////////////////////////////////////////////////////////////////////
	public function pudlValue(pudl $pudl, $quote=true) {
		return $this->query;
	}




	////////////////////////////////////////////////////////////////////////////
	// RETURN DEFAULT VALUES
	////////////////////////////////////////////////////////////////////////////
	public function free()		{ return false; }
	public function count()		{ return 1; }
	public function fields()	{ return ['QUERY']; }
	public function errno()		{ return 0; }
	public function error()		{ return false; }




	////////////////////////////////////////////////////////////////////////////
	// GET DETAILS ON A PARTICULAR FIELD COLUMN IN THIS RESULT
	////////////////////////////////////////////////////////////////////////////
	public function getField($column) {
		if (!$column) return ['QUERY'];
		return false;
	}




	////////////////////////////////////////////////////////////////////////////
	// PHP'S SEEKABLEITERATOR - JUMP TO A ROW IN THIS RESULT
	// http://php.net/manual/en/seekableiterator.seek.php
	////////////////////////////////////////////////////////////////////////////
	public function seek($row) {
		$this->returned = !!$row;
	}




	////////////////////////////////////////////////////////////////////////////
	// GET A SINGLE CELL FROM THIS RESULT
	////////////////////////////////////////////////////////////////////////////
	public function cell($row=0, $column=0) {
		if ($row  ||  $column) return false;
		return $this->query;
	}




	////////////////////////////////////////////////////////////////////////////
	// MOVE TO THE NEXT ROW IN THIS RESULT AND RETURN THAT ROW'S DATA
	////////////////////////////////////////////////////////////////////////////
	public function row() {
		if ($this->returned) return false;
		$this->returned = true;
		return $this->query;
	}




	////////////////////////////////////////////////////////////////////////////
	// GET ALL ROWS IN THE RESULT SET
	////////////////////////////////////////////////////////////////////////////
	public function rows() {
		return $this->row();
	}




	////////////////////////////////////////////////////////////////////////////
	// MEMBER VARIABLES
	////////////////////////////////////////////////////////////////////////////
	private	$returned	= false;
	public	$type		= false;

}
